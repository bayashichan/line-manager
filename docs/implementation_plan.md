# 友だち管理用ネーム（internal_name）実装計画

## 概要
ユーザーからの要望「独自に友だち表示名を管理用に設定できるようにしたい」に対応するため、`line_users` テーブルの `internal_name` カラムを活用し、UI上で直感的に設定・表示できる機能を強化する。
既存のコードベースには既に実装が含まれている可能性があるが、UX向上のために導線を改善する。

## 現状確認
- **DBスキーマ**: `line_users` テーブルに `internal_name` カラムが存在することを確認（`schema.sql`）。
- **既存UI**: `FriendDetailModal` 内に `internal_name` の入力フィールドが存在する。
- **課題**: 友だちリスト（カード表示）から「編集できること」が直感的に分かりにくい可能性がある。

## 変更計画

### 1. UI改善 (`dashboard/friends/page.tsx`)
- **編集アイコンの追加**: 友だちカードの名前の横に、明示的な「編集（鉛筆アイコン）」ボタンまたはホバー時のインジケーターを追加する。
- **表示ロジック**: `internal_name` が設定されている場合、本来の `display_name` （LINE名）も併記して区別しやすくする（現状も実装されているが、より見やすく調整）。

### 2. 機能検証
- **設定フロー**: 友だちを選択 -> モーダルで名前入力 -> 保存 -> リストに即時反映されることを確認。
- **検索連動**: 管理用ネームで検索がヒットすることを確認。

## タスクリスト
1. `dashboard/friends/page.tsx` のカードコンポーネントに編集アイコンを追加。
2. モーダル内のラベルや説明文を調整し、用途（管理用であること）を明確化。
